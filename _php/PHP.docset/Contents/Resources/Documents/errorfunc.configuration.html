<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>运行时配置</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="errorfunc.installation.html">« 安装</a></li>
      <li style="float: right;"><a href="errorfunc.resources.html">资源类型 »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="errorfunc.setup.html">安装／配置</a></li>
    <li>运行时配置</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="errorfunc.configuration" class="section">
 <h2 class="title">运行时配置</h2>
 <p class="simpara">
这些函数的行为受 <var class="filename">php.ini</var> 中的设置影响。
</p>
 <p class="para">
  <table class="doctable table">
   <caption><strong>错误和日志记录配置选项</strong></caption>
   
    <thead>
     <tr>
      <th>名字</th>
      <th>默认</th>
      <th>可修改范围</th>
      <th>更新日志</th>
     </tr>

    </thead>

    <tbody class="tbody">
    <tr>
     <td><a href="errorfunc.configuration.html#ini.error-reporting" class="link">error_reporting</a></td>
     <td>NULL</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.display-errors" class="link">display_errors</a></td>
     <td>&quot;1&quot;</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.display-startup-errors" class="link">display_startup_errors</a></td>
     <td>&quot;0&quot;</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.log-errors" class="link">log_errors</a></td>
     <td>&quot;0&quot;</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.log-errors-max-len" class="link">log_errors_max_len</a></td>
     <td>&quot;1024&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available since PHP 4.3.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.ignore-repeated-errors" class="link">ignore_repeated_errors</a></td>
     <td>&quot;0&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available since PHP 4.3.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.ignore-repeated-source" class="link">ignore_repeated_source</a></td>
     <td>&quot;0&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available since PHP 4.3.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.report-memleaks" class="link">report_memleaks</a></td>
     <td>&quot;1&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available since PHP 4.3.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.track-errors" class="link">track_errors</a></td>
     <td>&quot;0&quot;</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.html-errors" class="link">html_errors</a></td>
     <td>&quot;1&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>PHP_INI_SYSTEM in PHP &lt;= 4.2.3.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.xmlrpc-errors" class="link">xmlrpc_errors</a></td>
     <td>&quot;0&quot;</td>
     <td>PHP_INI_SYSTEM</td>
     <td>Available since PHP 4.1.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.xmlrpc-error-number" class="link">xmlrpc_error_number</a></td>
     <td>&quot;0&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available since PHP 4.1.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.docref-root" class="link">docref_root</a></td>
     <td>&quot;&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available since PHP 4.3.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.docref-ext" class="link">docref_ext</a></td>
     <td>&quot;&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available since PHP 4.3.2.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.error-prepend-string" class="link">error_prepend_string</a></td>
     <td>NULL</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.error-append-string" class="link">error_append_string</a></td>
     <td>NULL</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.error-log" class="link">error_log</a></td>
     <td>NULL</td>
     <td>PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.syslog.facility" class="link">syslog.facility</a></td>
     <td>&quot;LOG_USER&quot;</td>
     <td>PHP_INI_SYSTEM</td>
     <td>Available as of PHP 7.3.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.syslog.filter" class="link">syslog.filter</a></td>
     <td>&quot;no-ctrl&quot;</td>
     <td>PHP_INI_ALL</td>
     <td>Available as of PHP 7.3.0.</td>
    </tr>

    <tr>
     <td><a href="errorfunc.configuration.html#ini.syslog.ident" class="link">syslog.ident</a></td>
     <td>&quot;php&quot;</td>
     <td>PHP_INI_SYSTEM</td>
     <td>Available as of PHP 7.3.0.</td>
    </tr>

    </tbody>
   
  </table>

  有关 PHP_INI_* 样式的更多详情与定义，见 <a href="configuration.changes.modes.html" class="xref">配置可被设定范围</a>。
 </p>

 <p class="para">这是配置指令的简短说明。</p>

 <p class="para">
  <dl>
   
    <dt id="ini.error-reporting">
     <code class="parameter">error_reporting</code>
     <span class="type">integer</span>
    </dt>

    <dd>

     <p class="para">
      设置错误报告的级别。该参数可以是一个任意的表示二进制位字段的整数，或者常数名称。错误级别和常数是在
      <a href="errorfunc.constants.html" class="link">预定义常量</a>定义的，在 <var class="filename">php.ini</var> 之中也有专门的说明。在程序运行时，还可以通过
      <span class="function"><a href="function.error-reporting.html" class="function">error_reporting()</a></span> 函数进行设置。请查看
      <a href="errorfunc.configuration.html#ini.display-errors" class="link">display_errors</a> 了解详情。
     </p>
     <p class="para">
      在 PHP5.3 及以上版本中，默认值为 <strong><code>E_ALL</code></strong> &amp;
      ~<strong><code>E_NOTICE</code></strong> &amp;
      ~<strong><code>E_STRICT</code></strong> &amp;
      ~<strong><code>E_DEPRECATED</code></strong>。
      该设置不会显示 <strong><code>E_NOTICE</code></strong>、 <strong><code>E_STRICT</code></strong>
      、<strong><code>E_DEPRECATED</code></strong> 级错误提示。在开发时可以把它们显示出来。
     在 PHP 5.3.0 以前版本中，默认值是 <strong><code>E_ALL</code></strong> &amp;
      ~<strong><code>E_NOTICE</code></strong> &amp;
      ~<strong><code>E_STRICT</code></strong>。
      在 PHP 4 中，默认值是 <strong><code>E_ALL</code></strong>
      &amp; ~<strong><code>E_NOTICE</code></strong>。
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">在开发阶段启用 <strong><code>E_NOTICE</code></strong> 会有一些好处。出于调试的目的：通知信息会对代码中可能出现的bug给出警告。例如，使用未预先分配和定义的值，就会给出警告。它对于查找拼写错误非常有用，并且可以节省调试的时间。通知信息也会警告你使用更好的代码风格。例如，<code class="literal">$arr[item]</code> 最好写成
      <code class="literal">$arr[&#039;item&#039;]</code> ，因为 PHP 会试图将
      <code class="literal">&quot;item&quot;</code> 当成一个常量。如果它不是一个常量，PHP才会把它当做数组的字符串索引。
      </p>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       在PHP 5之中，提供了一个新的错误级别 <strong><code>E_STRICT</code></strong>。
       因为 <strong><code>E_STRICT</code></strong> 并不包含在
       <strong><code>E_ALL</code></strong> 之中，你必须明确启用才能显示这个类别的错误信息。在开发阶段启用 <strong><code>E_STRICT</code></strong> 会有一些好处。严格的信息将帮助你使用最新和最好的建议的方法来编写代码，例如它会警告你使用了将被废弃的函数。
      </p>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <strong>PHP外的PHP常量</strong><br />
      <p class="para">
       在 PHP 以外使用PHP的常量是没有意义的，例如在 <var class="filename">httpd.conf</var> 之中，
       你需要使用常量对应的 <span class="type">integer</span> 值来取代。因为随着时间的推移和PHP的发展，会有更多的错误级别将被添加，因此错误级别的最大值(为 <strong><code>E_ALL</code></strong>)可能会改变 。因此在使用
       <strong><code>E_ALL</code></strong> 对应整数值的地方，应该考虑使用较大的数值来涵盖当前和将来需要使用的二进制位字段，例如数值
       <code class="literal">2147483647</code> (将包含所有错误，而不仅仅是
       <strong><code>E_ALL</code></strong>).
      </p>
     </p></blockquote>
    </dd>

   

   
    <dt id="ini.display-errors">
     <code class="parameter">display_errors</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
      该选项设置是否将错误信息作为输出的一部分显示到屏幕，或者对用户隐藏而不显示。
     </p>
     <p class="para">
      设置 <code class="literal">&quot;stderr&quot;</code> 表示发送到 <code class="literal">stderr</code>
      而不是 <code class="literal">stdout</code>。 <code class="literal">&quot;stderr&quot;</code>从 PHP
      5.2.4 开始可用。在以前的版本中，该配置值的类型为 <span class="type">boolean</span>.
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
      这是一个辅助开发的功能，建议永远不要在生产系统中使用 (例如系统被连接到互联网对外提供服务)。
      </p>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       尽管 display_errors 也可以在运行时设置 (使用 <span class="function"><a href="function.ini-set.html" class="function">ini_set()</a></span>)，
       但是脚本出现致命错误时任何运行时的设置都是无效的。
       因为在这种情况下预期运行的操作不会被执行。
      </p>
     </p></blockquote>
    </dd>

   

   
    <dt id="ini.display-startup-errors">
     <code class="parameter">display_startup_errors</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      即使 display_errors 设置为开启,  PHP 启动过程中的错误信息也不会被显示。强烈建议除了调试目的以外，将 display_startup_errors 设置为关闭。
     </p>
    </dd>

   

   
    <dt id="ini.log-errors">
     <code class="parameter">log_errors</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      设置是否将脚本运行的错误信息记录到服务器错误日志或者<a href="errorfunc.configuration.html#ini.error-log" class="link">error_log</a>之中。注意，这是与服务器相关的特定配置项。
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       在生产系统中，强烈建议你使用错误日志记录web站点上显示的错误信息。
      </p>
     </p></blockquote>
    </dd>

   

   
    <dt id="ini.log-errors-max-len">
     <code class="parameter">log_errors_max_len</code>
     <span class="type">integer</span>
    </dt>

    <dd>

     <p class="para">
      设置 log_errors 的最大字节数. 在
      <a href="errorfunc.configuration.html#ini.error-log" class="link">error_log</a> 会添加有关错误源的信息。默认值为1024，如果设置为0表示不限长度。该长度设置对记录的错误，显示的错误，以及
      <var class="varname"><a href="reserved.variables.phperrormsg.html" class="classname">$php_errormsg</a></var>都会有限制作用。
     </p>

     <span class="simpara">当使用  <span class="type">int</span>
时, 其值以字节来衡量。还可以使用在<a href="faq.using.html#faq.using.shorthandbytes" class="link">FAQ</a>中描述的速记符。</span>

    </dd>

   

   
    <dt id="ini.ignore-repeated-errors">
     <code class="parameter">ignore_repeated_errors</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      不记录重复的信息。重复的错误必须出现在同一个文件中的同一行代码上，除非
      <a href="errorfunc.configuration.html#ini.ignore-repeated-source" class="link">ignore_repeated_source</a>
      设置为true。
     </p>
    </dd>

   

   
    <dt id="ini.ignore-repeated-source">
     <code class="parameter">ignore_repeated_source</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      忽略重复消息时，也忽略消息的来源。当该设置开启时，重复信息将不会记录它是由不同的文件还是不同的源代码行产生的。
     </p>
    </dd>

   

   
    <dt id="ini.report-memleaks">
     <code class="parameter">report_memleaks</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      如果这个参数设置为Off，则内存泄露信息不会显示 (在
      stdout 或者日志中)。This report
      will be send to stderr on Posix platforms. On Windows, it will be send
      to the debugger using OutputDebugString(), and can be viewed with tools
      like <a href="http://technet.microsoft.com/en-us/sysinternals/bb896647" class="link external">&raquo;&nbsp;DbgView</a>。这只对调试编译有效，而且需要
      <a href="errorfunc.configuration.html#ini.error-reporting" class="link">error_reporting</a> 包含了
      <strong><code>E_WARNING</code></strong> 才会起作用
     </p>
    </dd>

   

   
    <dt id="ini.track-errors">
     <code class="parameter">track_errors</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      如果开启，最后的一个错误将永远存在于变量 <var class="varname"><a href="reserved.variables.phperrormsg.html" class="classname">$php_errormsg</a></var> 中。
     </p>
    </dd>

   

   
    <dt id="ini.html-errors">
     <code class="parameter">html_errors</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      在错误信息中关闭HTML标签。这种新的HTML格式的错误信息是可以点击，它引导用户前往描述该错误或者导致该错误发生的函数的参考信息页面。 这些参考与
      <a href="errorfunc.configuration.html#ini.docref-root" class="link">docref_root</a> 和
      <a href="errorfunc.configuration.html#ini.docref-ext" class="link">docref_ext</a> 的设置有关。
     </p>
    </dd>

   

   
    <dt id="ini.xmlrpc-errors">
     <code class="parameter">xmlrpc_errors</code>
     <span class="type">boolean</span>
    </dt>

    <dd>

     <p class="para">
      关闭正常的错误报告，并将错误的格式设置为XML-RPC错误信息的格式。
     </p>
    </dd>

   

   
    <dt id="ini.xmlrpc-error-number">
     <code class="parameter">xmlrpc_error_number</code>
     <span class="type">integer</span>
    </dt>

    <dd>

     <p class="para">
      用作 XML-RPC faultCode 元素的值。
     </p>
    </dd>

   

   
    <dt id="ini.docref-root">
     <code class="parameter">docref_root</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
      新的错误信息格式包含了对应的参考页面，该页面对错误进行具体描述，或者描述了导致该错误发生的函数。为了提供手册的页面，你可以在PHP官方站点下载对应语言的手册，并在ini中设置网址到本地对应的地址。如果你的本地手册拷贝可以使用<code class="literal">&quot;/manual/&quot;</code>
访问，你就可以简单的设置 <strong class="userinput"><code>docref_root=/manual/</code></strong>。另外你还需要设置 docref_ext 匹配你本地文件的后缀名 
      <strong class="userinput"><code>docref_ext=.html</code></strong>。当然也可以设置一个外部的参考地址。例如你可以设置
      <strong class="userinput"><code>docref_root=http://manual/en/</code></strong> 或者
      <strong class="userinput"><code>docref_root=&quot;http://landonize.it/?how=url&amp;theme=classic&amp;filter=Landon
      &amp;url=http%3A%2F%2Fwww.php.net%2F&quot;</code></strong>
     </p>
     <p class="para">
      通常需要在 docref_root 后面以 <code class="literal">&quot;/&quot;</code>结尾，
      但是在以上的第二种示例情况中不必这么设置。
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       因为这么做可以快速定位和查看到函数的说明，所以它对你的开发会非常有用。建议永远不要再生产系统中使用 (例如系统被连接到互联网对外提供服务)。
      </p>
     </p></blockquote>
    </dd>

   

   
    <dt id="ini.docref-ext">
     <code class="parameter">docref_ext</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
      参见 <a href="errorfunc.configuration.html#ini.docref-root" class="link">docref_root</a>.
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       docref_ext的值必须以 <code class="literal">&quot;.&quot;</code> 开头.
      </p>
     </p></blockquote>
    </dd>

   

   
    <dt id="ini.error-prepend-string">
     <code class="parameter">error_prepend_string</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
      错误信息之前输出的内容。
     </p>
    </dd>

   

   
    <dt id="ini.error-append-string">
     <code class="parameter">error_append_string</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
      错误信息之后输出的内容。
     </p>
    </dd>

   

   
    <dt id="ini.error-log">
     <code class="parameter">error_log</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
      设置脚本错误将被记录到的文件。该文件必须是web服务器用户可写的。如果特殊值 <code class="literal">syslog</code> 被设置，则将错误信息发送到系统日志记录器。在Unix以及类似系统上，使用的是 syslog(3) ，而在 Windows NT 类系统上则为事件日志。Windows 95上不支持系统日志记录。参见：
      <span class="function"><a href="function.syslog.html" class="function">syslog()</a></span>.
      如果该配置没有设置，则错误信息会被发送到 SAPI 错误记录器。例如，出现在Apache的错误日志中，或者在CLI中发送到 <code class="literal">stderr</code>。
     </p>
    </dd>

   

   
    <dt id="ini.syslog.facility">
     <code class="parameter">syslog.facility</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
       指定记录日志信息的程序类型，仅在 <a href="errorfunc.configuration.html#ini.error-log" class="link">error_log</a> 设置为 &quot;syslog&quot; 时有效。
     </p>
    </dd>

   

   
    <dt id="ini.syslog.filter">
     <code class="parameter">syslog.filter</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
      Specifies the filter type to filter the logged messages. Allowed
      characters are passed unmodified; all others are written in their
      hexadecimal representation prefixed with <code class="literal">\x</code>. There are
      three supported filter types:
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara"><code class="literal">all</code> – all characters</span>
       </li>
       <li class="listitem">
        <span class="simpara"><code class="literal">no-ctrl</code> – all characters except control characters</span>
       </li>
       <li class="listitem">
        <span class="simpara"><code class="literal">ascii</code> – all printable ASCII characters and <code class="literal">NL</code></span>
       </li>
      </ul>
      仅在 <a href="errorfunc.configuration.html#ini.error-log" class="link">error_log</a> 为 &quot;syslog&quot; 时有效。
     </p>
    </dd>

   

   
    <dt id="ini.syslog.ident">
     <code class="parameter">syslog.ident</code>
     <span class="type">string</span>
    </dt>

    <dd>

     <p class="para">
       设置每条日志消息前缀的识别字符串（ident string），仅在 <a href="errorfunc.configuration.html#ini.error-log" class="link">error_log</a> 为 &quot;syslog&quot; 时有效。
     </p>
    </dd>

   
  </dl>

 </p>
</div></div></div></body></html>