<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>新特性</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration80.html">« 从 PHP 7.4.x 移植到 PHP 8.0.x</a></li>
      <li style="float: right;"><a href="migration80.incompatible.html">不向后兼容的变更 »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="migration80.html">从 PHP 7.4.x 移植到 PHP 8.0.x</a></li>
    <li>新特性</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration80.new-features" class="sect1">
 <h2 class="title">新特性</h2>

 <div class="sect2" id="migration80.new-features.core">
  <h3 class="title">PHP 核心中的新特性</h3>

  <div class="sect3" id="migration80.new-features.core.named-arguments">
   <h4 class="title">命名参数</h4>

   <p class="para">
    
    新增<a href="functions.arguments.html#functions.named-arguments" class="link">命名参数</a>的功能。
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.attributes">
   <h4 class="title">注解（Attributes）</h4>

   <p class="para">
    新增<a href="language.attributes.html" class="link">注解</a>的功能。
    
    
    
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.property-promotion">
   <h4 class="title">构造器属性提升（Constructor Property Promotion）</h4>

   <p class="para">
    新增<a href="language.oop5.decon.html#language.oop5.decon.constructor.promotion" class="link">构造器属性提升</a>功能
    在构造函数中声明类的属性）。
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.union-types">
   <h4 class="title">联合类型</h4>

   <p class="para">
    新增 <a href="language.types.declarations.html#language.types.declarations.composite.union" class="link">联合类型</a>。
    
   </p> 
  </div>

  <div class="sect3" id="migration80.new-features.core.match">
   <h4 class="title">Match 表达式</h4>

   <p class="para">
    新增 <a href="control-structures.match.html" class="link"><code class="literal">match</code> 表达式</a>。
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.nullsafe-operator">
   <h4 class="title">Nullsafe 运算符</h4>

   <p class="para">
    新增<a href="language.oop5.basic.html#language.oop5.basic.nullsafe" class="link">Nullsafe 运算符</a>(<code class="literal">?-&gt;</code>)。
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.others">
   <h4 class="title">其他新特性</h4>

   <ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      新增 <a href="class.weakmap.html" class="link">WeakMap</a> 类。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      新增 <span class="classname"><a href="class.valueerror.html" class="classname">ValueError</a></span> 类。
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      现在，只要类型兼容，任意数量的函数参数都可以用一个可变参数替换。
      例如允许编写下面的代码：
     </p>
     <p class="para">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">method</span><span style="color: #007700">(</span><span style="color: #0000BB">int&nbsp;$many</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">string&nbsp;$parameters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$here</span><span style="color: #007700">)&nbsp;{}<br />}<br />class&nbsp;</span><span style="color: #0000BB">B&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">method</span><span style="color: #007700">(...</span><span style="color: #0000BB">$everything</span><span style="color: #007700">)&nbsp;{}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <span class="type"><span class="type static">static</span></span> (&quot;后期静态绑定&quot;中) 可以作为返回类型：
     </p>
     <p class="para">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Test&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">create</span><span style="color: #007700">():&nbsp;static&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;static();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      现在可以通过 <code class="code">$object::class</code> 获取类名，返回的结果和 <code class="code">get_class($object)</code> 一致。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <a href="language.oop5.basic.html#language.oop5.basic.new" class="link"><code class="literal">new</code></a>、<a href="language.operators.type.html" class="link"><code class="literal">instanceof</code></a> 可用于任何表达式，
      用法为 <code class="code">new (expression)(...$args)</code> 和 <code class="code">$obj instanceof (expression)</code>。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      添加对一些变量语法一致性的修复，例如现在能够编写
      <code class="code">Foo::BAR::$baz</code>。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      添加 <span class="interfacename"><a href="class.stringable.html" class="interfacename">Stringable</a></span> interface，
      当一个类定义 <a href="language.oop5.magic.html#object.tostring" class="link">__toString()</a> 方法后会自动实现该接口。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Trait 可以定义私有抽象方法（abstract private method）。
      类必须实现 trait 定义的该方法。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      可作为表达式使用 <code class="literal">throw</code>。
      使得可以编写以下用法：
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$fn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fn</span><span style="color: #007700">()&nbsp;=&gt;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Exception&nbsp;in&nbsp;arrow&nbsp;function'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$session</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">user&nbsp;</span><span style="color: #007700">??&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Must&nbsp;have&nbsp;user'</span><span style="color: #007700">);</span>
</span>
</code></div>
      </div>

      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      参数列表中的末尾逗号为可选。
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">functionWithLongSignature</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Type1&nbsp;$parameter1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Type2&nbsp;$parameter2</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;&lt;--&nbsp;这个逗号也被允许了<br /></span><span style="color: #007700">)&nbsp;{<br />}</span>
</span>
</code></div>
      </div>

      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
     现在允许 <code class="code">catch (Exception)</code> 一个 exception 而无需捕获到变量中。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      支持 <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> 类型。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Private methods declared on a parent class no longer enforce any inheritance rules on the methods
      of a child class (with the exception of final private constructors).
      The following example illustrates which restrictions have been removed:
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">ParentClass&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;</span><span style="color: #0000BB">method1</span><span style="color: #007700">()&nbsp;{}<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;</span><span style="color: #0000BB">method2</span><span style="color: #007700">()&nbsp;{}<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">method3</span><span style="color: #007700">()&nbsp;{}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Throws&nbsp;a&nbsp;warning,&nbsp;as&nbsp;"final"&nbsp;no&nbsp;longer&nbsp;has&nbsp;an&nbsp;effect:<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;final&nbsp;function&nbsp;</span><span style="color: #0000BB">method4</span><span style="color: #007700">()&nbsp;{}<br />}<br />class&nbsp;</span><span style="color: #0000BB">ChildClass&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">ParentClass&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;All&nbsp;of&nbsp;the&nbsp;following&nbsp;are&nbsp;now&nbsp;allowed,&nbsp;even&nbsp;though&nbsp;the&nbsp;modifiers&nbsp;aren't<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;same&nbsp;as&nbsp;for&nbsp;the&nbsp;private&nbsp;methods&nbsp;in&nbsp;the&nbsp;parent&nbsp;class.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;abstract&nbsp;function&nbsp;</span><span style="color: #0000BB">method1</span><span style="color: #007700">()&nbsp;{}<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">method2</span><span style="color: #007700">()&nbsp;{}<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">method3</span><span style="color: #007700">()&nbsp;{}<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">method4</span><span style="color: #007700">()&nbsp;{}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a href="function.get-resource-id.html" class="function">get_resource_id()</a></span> has been added, which returns the same value as
      <code class="code">(int) $resource</code>. It provides the same functionality under a clearer API.
     </p>
    </li>
   </ul>
  </div>
 </div>

 <div class="sect2" id="migration80.new-features.date">
  <h3 class="title">Date and Time</h3>
  
  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <span class="methodname"><a href="datetime.createfrominterface.html" class="methodname">DateTime::createFromInterface()</a></span> and
     <span class="methodname"><a href="datetimeimmutable.createfrominterface.html" class="methodname">DateTimeImmutable::createFromInterface()</a></span> have been added.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The DateTime format specifier <code class="literal">p</code> has been added, which is the same as
     <code class="literal">P</code> but returns <code class="literal">Z</code> rather than <code class="literal">+00:00</code>
     for UTC.
    </p>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration80.new-features.dom">
  <h3 class="title">DOM</h3>

  <p class="para">
   <span class="interfacename"><a href="class.domparentnode.html" class="interfacename">DOMParentNode</a></span> and <span class="interfacename"><a href="class.domchildnode.html" class="interfacename">DOMChildNode</a></span> with
   new traversal and manipulation APIs have been added.
   
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.filter">
  <h3 class="title">Filter</h3>

  <p class="para">
   <strong><code>FILTER_VALIDATE_BOOL</code></strong> has been added as an alias for
   <strong><code>FILTER_VALIDATE_BOOLEAN</code></strong>. The new name is preferred, as it uses the canonical
   type name.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.enchant">
  <h3 class="title">Enchant</h3>

  <p class="para">
   <span class="function"><a href="function.enchant-dict-add.html" class="function">enchant_dict_add()</a></span>, <span class="function"><a href="function.enchant-dict-is-added.html" class="function">enchant_dict_is_added()</a></span>, and
   <strong><code>LIBENCHANT_VERSION</code></strong> have been added.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.fpm">
  <h3 class="title">FPM</h3>

  <p class="para">
   Added a new option <code class="literal">pm.status_listen</code> that allows getting the status from
   different endpoint (e.g. port or UDS file) which is useful for getting the status when all
   children are busy with serving long running requests.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.hash">
  <h3 class="title">Hash</h3>

  <p class="para">
   <span class="classname"><strong class="classname">HashContext</strong></span> objects can now be serialized.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.intl">
  <h3 class="title">Internationalization Functions</h3>

  <p class="para">
   The <strong><code>IntlDateFormatter::RELATIVE_FULL</code></strong>,
   <strong><code>IntlDateFormatter::RELATIVE_LONG</code></strong>,
   <strong><code>IntlDateFormatter::RELATIVE_MEDIUM</code></strong>, and
   <strong><code>IntlDateFormatter::RELATIVE_SHORT</code></strong>
   constants have been added.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.ldap">
  <h3 class="title">LDAP</h3>

  <p class="para">
   <span class="function"><a href="function.ldap-count-references.html" class="function">ldap_count_references()</a></span> has been added, which returns the number
   of reference messages in a search result.
  </p>
 </div>
 <div class="sect2" id="migration80.new-features.opcache">
  <h3 class="title">OPcache</h3>

  <p class="para">
   If the opcache.record_warnings ini setting is
   enabled, OPcache will record compile-time warnings and replay them on the next include, even if
   it is served from cache.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.openssl">
  <h3 class="title">OpenSSL</h3>

  <p class="para">
   Added Cryptographic Message Syntax (CMS) (<a href="http://www.faqs.org/rfcs/rfc5652" class="link external">&raquo;&nbsp;RFC 5652</a>)
   support composed of functions for encryption, decryption, signing, verifying and reading. The API
   is similar to the API for PKCS #7 functions with an addition of new encoding constants:
   <strong><code>OPENSSL_ENCODING_DER</code></strong>, <strong><code>OPENSSL_ENCODING_SMIME</code></strong>
   and <strong><code>OPENSSL_ENCODING_PEM</code></strong>:
   <ul class="simplelist">
    <li class="member">
     <span class="function"><a href="function.openssl-cms-encrypt.html" class="function">openssl_cms_encrypt()</a></span> encrypts the message in the file with the certificates
     and outputs the result to the supplied file.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-decrypt.html" class="function">openssl_cms_decrypt()</a></span> that decrypts the S/MIME message in the file and outputs
     the results to the supplied file.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-read.html" class="function">openssl_cms_read()</a></span> that exports the CMS file to an array of PEM certificates.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-sign.html" class="function">openssl_cms_sign()</a></span> that signs the MIME message in the file with a cert and key
     and output the result to the supplied file.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-verify.html" class="function">openssl_cms_verify()</a></span> that verifies that the data block is intact, the signer
     is who they say they are, and returns the certs of the signers.
    </li>
   </ul>
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.pcre">
  <h3 class="title">Regular Expressions (Perl-Compatible)</h3>

  <p class="para">
   <span class="function"><a href="function.preg-last-error-msg.html" class="function">preg_last_error_msg()</a></span> has been added, which returns a human-readable message for the last
   PCRE error. It complements <span class="function"><a href="function.preg-last-error.html" class="function">preg_last_error()</a></span>, which returns an integer enum value
   instead.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.reflection">
  <h3 class="title">Reflection</h3>

  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     The following methods can now return information about default values of
     parameters of internal functions:
    </p>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="reflectionparameter.isdefaultvalueavailable.html" class="methodname">ReflectionParameter::isDefaultValueAvailable()</a></span></li>
      <li class="member"><span class="methodname"><a href="reflectionparameter.getdefaultvalue.html" class="methodname">ReflectionParameter::getDefaultValue()</a></span></li>
      <li class="member"><span class="methodname"><a href="reflectionparameter.isdefaultvalueconstant.html" class="methodname">ReflectionParameter::isDefaultValueConstant()</a></span></li>
      <li class="member"><span class="methodname"><a href="reflectionparameter.getdefaultvalueconstantname.html" class="methodname">ReflectionParameter::getDefaultValueConstantName()</a></span></li>
     </ul>
    </p>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration80.new-features.sqlite3">
  <h3 class="title">SQLite3</h3>

  <p class="para">
   <span class="methodname"><a href="sqlite3.setauthorizer.html" class="methodname">SQLite3::setAuthorizer()</a></span> and respective class constants have been added
   to set a userland callback that will be used to authorize or not an action on the database.
   
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.standard">
  <h3 class="title">Standard Library</h3>

  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.str-contains.html" class="function">str_contains()</a></span>, <span class="function"><a href="function.str-starts-with.html" class="function">str_starts_with()</a></span> and
     <span class="function"><a href="function.str-ends-with.html" class="function">str_ends_with()</a></span> have been added, which check whether <code class="parameter">haystack</code> contains,
     starts with or ends with <code class="parameter">needle</code>, respectively.
     
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.fdiv.html" class="function">fdiv()</a></span> has been added, which performs a floating-point division under IEEE 754 semantics.
     Division by zero is considered well-defined and will return one of <code class="literal">Inf</code>,
     <code class="literal">-Inf</code> or <code class="literal">NaN</code>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.get-debug-type.html" class="function">get_debug_type()</a></span> has been added, which returns a type useful for error messages. Unlike
     <span class="function"><a href="function.gettype.html" class="function">gettype()</a></span>, it uses canonical type names, returns class names for objects, and
     indicates the resource type for resources.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.printf.html" class="function">printf()</a></span> and friends now support the <code class="literal">%h</code> and
     <code class="literal">%H</code> format specifiers. These are the same as <code class="literal">%g</code> and
     <code class="literal">%G</code>, but always use <code class="literal">&quot;.&quot;</code> as the decimal separator, rather
     than determining it through the <strong><code>LC_NUMERIC</code></strong> locale.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.printf.html" class="function">printf()</a></span> and friends now support using <code class="literal">&quot;*&quot;</code> as width or
     precision, in which case the width/precision is passed as an argument to printf. This also allows
     using precision <code class="literal">-1</code> with <code class="literal">%g</code>, <code class="literal">%G</code>,
     <code class="literal">%h</code> and <code class="literal">%H</code>. For example, the following code can be used to
     reproduce PHP&#039;s default floating point formatting:
    </p>
    <p class="para">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.*H"</span><span style="color: #007700">,&nbsp;(int)&nbsp;</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"precision"</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$float</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.*H"</span><span style="color: #007700">,&nbsp;(int)&nbsp;</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"serialize_precision"</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$float</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.proc-open.html" class="function">proc_open()</a></span> now supports pseudo-terminal (PTY) descriptors. The following
     attaches <code class="literal">stdin</code>, <code class="literal">stdout</code> and <code class="literal">stderr</code> to the
     same PTY:
    </p>
    <p class="para">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$proc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">proc_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">,&nbsp;[[</span><span style="color: #DD0000">'pty'</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'pty'</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'pty'</span><span style="color: #007700">]],&nbsp;</span><span style="color: #0000BB">$pipes</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.proc-open.html" class="function">proc_open()</a></span> now supports socket pair descriptors. The following attaches a
     distinct socket pair to <code class="literal">stdin</code>, <code class="literal">stdout</code> and
     <code class="literal">stderr</code>:
    </p>
    <p class="para">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$proc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">proc_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">,&nbsp;[[</span><span style="color: #DD0000">'socket'</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'socket'</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'socket'</span><span style="color: #007700">]],&nbsp;</span><span style="color: #0000BB">$pipes</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </p>
    <p class="para">
     Unlike pipes, sockets do not suffer from blocking I/O issues on Windows. However, not all
     programs may work correctly with stdio sockets.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Sorting functions are now stable, which means that equal-comparing elements will retain their
     original order.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.array-diff.html" class="function">array_diff()</a></span>, <span class="function"><a href="function.array-intersect.html" class="function">array_intersect()</a></span> and their variations can
     now be used with a single array as argument. This means that usages like the following are now
     possible:
    </p>
    <p class="para">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;OK&nbsp;even&nbsp;if&nbsp;$excludes&nbsp;is&nbsp;empty:<br /></span><span style="color: #0000BB">array_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">,&nbsp;...</span><span style="color: #0000BB">$excludes</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;OK&nbsp;even&nbsp;if&nbsp;$arrays&nbsp;only&nbsp;contains&nbsp;a&nbsp;single&nbsp;array:<br /></span><span style="color: #0000BB">array_intersect</span><span style="color: #007700">(...</span><span style="color: #0000BB">$arrays</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">flag</code> parameter of <span class="function"><a href="function.ob-implicit-flush.html" class="function">ob_implicit_flush()</a></span> was changed
     to accept a <span class="type">bool</span> rather than an <span class="type">int</span>.
    </p>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration80.new-features.tokenizer">
  <h3 class="title">Tokenizer</h3>

  <p class="para">
   <span class="classname"><a href="class.phptoken.html" class="classname">PhpToken</a></span> adds an object-based interface to the tokenizer. It provides a
   more uniform and ergonomic representation, while being more memory efficient and faster.
   
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.zip">
  <h3 class="title">Zip</h3>

  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     The Zip extension has been updated to version 1.19.1.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.setmtimename.html" class="methodname">ZipArchive::setMtimeName()</a></span> and
     <span class="methodname"><a href="ziparchive.setmtimeindex.html" class="methodname">ZipArchive::setMtimeIndex()</a></span> to set the modification time of an entry.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.registerprogresscallback.html" class="methodname">ZipArchive::registerProgressCallback()</a></span> to provide updates during archive close.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.registercancelcallback.html" class="methodname">ZipArchive::registerCancelCallback()</a></span> to allow cancellation during archive
     close.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.replacefile.html" class="methodname">ZipArchive::replaceFile()</a></span> to replace an entry content.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.iscompressionmethoddupported.html" class="methodname">ZipArchive::isCompressionMethodSupported()</a></span> to check optional compression
     features.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.isencryptionmethoddupported.html" class="methodname">ZipArchive::isEncryptionMethodSupported()</a></span> to check optional encryption
     features.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <var class="varname">ZipArchive::lastId</var> property to get the index value of
     the last added entry has been added.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Errors can now be checked after an archive has been closed using the
     <var class="varname">ZipArchive::status</var> and
     <var class="varname">ZipArchive::statusSys</var> properties, or the
     <span class="methodname"><a href="ziparchive.getstatusstring.html" class="methodname">ZipArchive::getStatusString()</a></span> method.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="literal">&#039;remove_path&#039;</code> option of <span class="methodname"><a href="ziparchive.addglob.html" class="methodname">ZipArchive::addGlob()</a></span> and
     <span class="methodname"><a href="ziparchive.addpattern.html" class="methodname">ZipArchive::addPattern()</a></span> is now treated as an arbitrary string prefix (for
     consistency with the <code class="literal">&#039;add_path&#039;</code> option), whereas formerly it was treated as a
     directory name.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Optional compression / encryption features are now listed in phpinfo.
    </p>
   </li>
  </ul>
 </div>

</div></div></div></body></html>